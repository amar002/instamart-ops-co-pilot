{"ast":null,"code":"export const THRESHOLDS = {\n  O2HAR: 9.0,\n  UNSERVICEABILITY: 5.0\n};\nexport const COLORS = {\n  SUCCESS: 'bg-success-500',\n  ERROR: 'bg-error-500',\n  WARNING: 'bg-warning-500',\n  PRIMARY: 'bg-primary-500',\n  SECONDARY: 'bg-secondary-500',\n  ACCENT: 'bg-accent-500',\n  NEUTRAL: 'bg-neutral-500'\n};\nexport const TEXT_COLORS = {\n  SUCCESS: 'text-success-600',\n  ERROR: 'text-error-600',\n  WARNING: 'text-warning-600',\n  PRIMARY: 'text-primary-600',\n  SECONDARY: 'text-secondary-600',\n  ACCENT: 'text-accent-600',\n  NEUTRAL: 'text-neutral-600'\n};\nexport const getLatestPodData = pods => {\n  const latestDate = new Date(Math.max(...pods.map(pod => new Date(pod.date).getTime())));\n  const latestDateStr = latestDate.toISOString().split('T')[0];\n  return pods.filter(pod => pod.date === latestDateStr);\n};\nexport const getPodTrend = (pods, podId) => {\n  return pods.filter(pod => pod.pod_id === podId).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()).slice(0, 7);\n};\nexport const isMetricBreached = (metric, value) => {\n  return metric === 'o2har' ? value > THRESHOLDS.O2HAR : value > THRESHOLDS.UNSERVICEABILITY;\n};\nexport const getStatusColor = pod => {\n  const o2harBreached = isMetricBreached('o2har', pod.o2har);\n  const unserviceabilityBreached = isMetricBreached('unserviceability', pod.unserviceability);\n  return o2harBreached || unserviceabilityBreached ? 'bg-error-500' : 'bg-success-500';\n};\nexport const getCitySummaries = podsData => {\n  // Get latest data per pod\n  const latestPods = [];\n  const podMap = new Map();\n  podsData.forEach(pod => {\n    const key = pod.pod_id;\n    if (!podMap.has(key) || new Date(pod.date) > new Date(podMap.get(key).date)) {\n      podMap.set(key, pod);\n    }\n  });\n  podMap.forEach(pod => latestPods.push(pod));\n\n  // Group by city\n  const cityMap = new Map();\n  latestPods.forEach(pod => {\n    if (!cityMap.has(pod.city)) {\n      cityMap.set(pod.city, {\n        city: pod.city,\n        o2har: 0,\n        unserviceability: 0,\n        totalPods: 0,\n        breachedPods: 0,\n        lastUpdated: pod.date,\n        owner: {\n          name: pod.city_owner_name,\n          email: pod.city_owner_email\n        }\n      });\n    }\n    const city = cityMap.get(pod.city);\n    city.o2har += pod.o2har;\n    city.unserviceability += pod.unserviceability;\n    city.totalPods += 1;\n    if (pod.o2har > THRESHOLDS.O2HAR || pod.unserviceability > THRESHOLDS.UNSERVICEABILITY) {\n      city.breachedPods += 1;\n    }\n    if (new Date(pod.date) > new Date(city.lastUpdated)) {\n      city.lastUpdated = pod.date;\n    }\n  });\n\n  // Average metrics\n  cityMap.forEach(city => {\n    city.o2har = city.o2har / city.totalPods;\n    city.unserviceability = city.unserviceability / city.totalPods;\n  });\n  return Array.from(cityMap.values());\n};\nexport const mockPromptQLResponse = question => {\n  const responses = [\"Based on the current metrics, I recommend increasing DE allocation by 20% for this pod.\", \"The O2HAR threshold breach suggests we need to implement surge pricing immediately.\", \"Consider calling additional part-time DEs to address the current shortage.\", \"Traffic conditions are affecting delivery times. Suggest alternative routes to DEs.\", \"The unserviceability rate indicates we need to optimize the delivery radius.\"];\n  return responses[Math.floor(Math.random() * responses.length)];\n};","map":{"version":3,"names":["THRESHOLDS","O2HAR","UNSERVICEABILITY","COLORS","SUCCESS","ERROR","WARNING","PRIMARY","SECONDARY","ACCENT","NEUTRAL","TEXT_COLORS","getLatestPodData","pods","latestDate","Date","Math","max","map","pod","date","getTime","latestDateStr","toISOString","split","filter","getPodTrend","podId","pod_id","sort","a","b","slice","isMetricBreached","metric","value","getStatusColor","o2harBreached","o2har","unserviceabilityBreached","unserviceability","getCitySummaries","podsData","latestPods","podMap","Map","forEach","key","has","get","set","push","cityMap","city","totalPods","breachedPods","lastUpdated","owner","name","city_owner_name","email","city_owner_email","Array","from","values","mockPromptQLResponse","question","responses","floor","random","length"],"sources":["C:/Users/scar/Downloads/cursor/src/utils/helpers.ts"],"sourcesContent":["import { PodData, CitySummary } from '../types';\r\n\r\nexport const THRESHOLDS = {\r\n  O2HAR: 9.0,\r\n  UNSERVICEABILITY: 5.0,\r\n};\r\n\r\nexport const COLORS = {\r\n  SUCCESS: 'bg-success-500',\r\n  ERROR: 'bg-error-500',\r\n  WARNING: 'bg-warning-500',\r\n  PRIMARY: 'bg-primary-500',\r\n  SECONDARY: 'bg-secondary-500',\r\n  ACCENT: 'bg-accent-500',\r\n  NEUTRAL: 'bg-neutral-500',\r\n};\r\n\r\nexport const TEXT_COLORS = {\r\n  SUCCESS: 'text-success-600',\r\n  ERROR: 'text-error-600',\r\n  WARNING: 'text-warning-600',\r\n  PRIMARY: 'text-primary-600',\r\n  SECONDARY: 'text-secondary-600',\r\n  ACCENT: 'text-accent-600',\r\n  NEUTRAL: 'text-neutral-600',\r\n};\r\n\r\nexport const getLatestPodData = (pods: PodData[]): PodData[] => {\r\n  const latestDate = new Date(Math.max(...pods.map(pod => new Date(pod.date).getTime())));\r\n  const latestDateStr = latestDate.toISOString().split('T')[0];\r\n  \r\n  return pods.filter(pod => pod.date === latestDateStr);\r\n};\r\n\r\nexport const getPodTrend = (pods: PodData[], podId: string): PodData[] => {\r\n  return pods\r\n    .filter(pod => pod.pod_id === podId)\r\n    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n    .slice(0, 7);\r\n};\r\n\r\nexport const isMetricBreached = (metric: 'o2har' | 'unserviceability', value: number): boolean => {\r\n  return metric === 'o2har' ? value > THRESHOLDS.O2HAR : value > THRESHOLDS.UNSERVICEABILITY;\r\n};\r\n\r\nexport const getStatusColor = (pod: PodData): string => {\r\n  const o2harBreached = isMetricBreached('o2har', pod.o2har);\r\n  const unserviceabilityBreached = isMetricBreached('unserviceability', pod.unserviceability);\r\n  \r\n  return (o2harBreached || unserviceabilityBreached) ? 'bg-error-500' : 'bg-success-500';\r\n};\r\n\r\nexport const getCitySummaries = (podsData: PodData[]): CitySummary[] => {\r\n  // Get latest data per pod\r\n  const latestPods: PodData[] = [];\r\n  const podMap = new Map<string, PodData>();\r\n  \r\n  podsData.forEach(pod => {\r\n    const key = pod.pod_id;\r\n    if (!podMap.has(key) || new Date(pod.date) > new Date(podMap.get(key)!.date)) {\r\n      podMap.set(key, pod);\r\n    }\r\n  });\r\n  \r\n  podMap.forEach(pod => latestPods.push(pod));\r\n  \r\n  // Group by city\r\n  const cityMap = new Map<string, CitySummary>();\r\n  \r\n  latestPods.forEach(pod => {\r\n    if (!cityMap.has(pod.city)) {\r\n      cityMap.set(pod.city, {\r\n        city: pod.city,\r\n        o2har: 0,\r\n        unserviceability: 0,\r\n        totalPods: 0,\r\n        breachedPods: 0,\r\n        lastUpdated: pod.date,\r\n        owner: {\r\n          name: pod.city_owner_name,\r\n          email: pod.city_owner_email,\r\n        },\r\n      });\r\n    }\r\n    \r\n    const city = cityMap.get(pod.city)!;\r\n    city.o2har += pod.o2har;\r\n    city.unserviceability += pod.unserviceability;\r\n    city.totalPods += 1;\r\n    \r\n    if (pod.o2har > THRESHOLDS.O2HAR || pod.unserviceability > THRESHOLDS.UNSERVICEABILITY) {\r\n      city.breachedPods += 1;\r\n    }\r\n    \r\n    if (new Date(pod.date) > new Date(city.lastUpdated)) {\r\n      city.lastUpdated = pod.date;\r\n    }\r\n  });\r\n  \r\n  // Average metrics\r\n  cityMap.forEach(city => {\r\n    city.o2har = city.o2har / city.totalPods;\r\n    city.unserviceability = city.unserviceability / city.totalPods;\r\n  });\r\n  \r\n  return Array.from(cityMap.values());\r\n};\r\n\r\nexport const mockPromptQLResponse = (question: string): string => {\r\n  const responses = [\r\n    \"Based on the current metrics, I recommend increasing DE allocation by 20% for this pod.\",\r\n    \"The O2HAR threshold breach suggests we need to implement surge pricing immediately.\",\r\n    \"Consider calling additional part-time DEs to address the current shortage.\",\r\n    \"Traffic conditions are affecting delivery times. Suggest alternative routes to DEs.\",\r\n    \"The unserviceability rate indicates we need to optimize the delivery radius.\",\r\n  ];\r\n  \r\n  return responses[Math.floor(Math.random() * responses.length)];\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}